<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<groupId>com.tuc.chile</groupId>
	<artifactId>launcher-batch</artifactId>
	<version>0.0.1-SNAPSHOT</version>
	<packaging>jar</packaging>

	<name>launcher-batch</name>
	<url>http://maven.apache.org</url>

	<properties>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
	</properties>

	<dependencies>

		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-core</artifactId>
			<version>2.20.1</version>
		</dependency>

		<dependency>
			<groupId>log4j</groupId>
			<artifactId>log4j</artifactId>
			<version>1.2.16</version>
			<scope>compile</scope>
		</dependency>

		<!-- <dependency> -->
		<!-- <groupId>org.apache.logging.log4j</groupId> -->
		<!-- <artifactId>log4j-slf4j-impl</artifactId> -->
		<!-- <version>2.1</version> -->
		<!-- </dependency> -->

		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-ftp</artifactId>
			<version>2.20.1</version>
		</dependency>

		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-exec</artifactId>
			<version>2.20.1</version>
		</dependency>


		<dependency>
			<groupId>commons-logging</groupId>
			<artifactId>commons-logging</artifactId>
			<version>1.2</version>
			<scope>compile</scope>
		</dependency>

		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-log4j12</artifactId>
			<version>1.7.25</version>

		</dependency>


		<!-- <dependency> -->
		<!-- <groupId>org.apache.logging.log4j</groupId> -->
		<!-- <artifactId>log4j-core</artifactId> -->
		<!-- <version>2.10.0</version> -->
		<!-- </dependency> -->


		<dependency>
			<groupId>junit</groupId>
			<artifactId>junit</artifactId>
			<version>3.8.1</version>
			<scope>test</scope>
		</dependency>
	</dependencies>
</project>



---------------
package com.tuc.chile.launcher_batch.route;

import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.component.properties.PropertiesComponent;
//import org.apache.commons.logging.Log;
//import org.apache.commons.logging.LogFactory;
import org.apache.log4j.Logger;

public class MovistarInRoute extends RouteBuilder
{

	private static Logger logger = org.apache.log4j.Logger.getLogger(MovistarInRoute.class);

	@Override
	public void configure() throws Exception
	{
		logger.info("Config MovistarInRoute");

		// configure properties component
		PropertiesComponent pc = getContext().getComponent("properties", PropertiesComponent.class);
		pc.setLocation("classpath:ftp.properties");

		// lets shutdown faster in case of in-flight messages stack up
		// getContext().getShutdownStrategy().setTimeout(10000);

		from("{{batch.movistar.in.folder}}").log("Read file").to("{{batch.movistar.process.folder}}").log("Downloaded file ${file:name} complete.").end();

	}

}

package com.tuc.chile.launcher_batch.route;

import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.component.properties.PropertiesComponent;
//import org.apache.commons.logging.Log;
//import org.apache.commons.logging.LogFactory;
import org.apache.log4j.Logger;

public class MovistarProcessRoute extends RouteBuilder
{

	private static Logger logger = org.apache.log4j.Logger.getLogger(MovistarProcessRoute.class);

	@Override
	public void configure() throws Exception
	{
		logger.info("Config MovistarProcessRoute");

		// configure properties component
		PropertiesComponent pc = getContext().getComponent("properties", PropertiesComponent.class);
		pc.setLocation("classpath:ftp.properties");

		// lets shutdown faster in case of in-flight messages stack up
		getContext().getShutdownStrategy().setTimeout(10000);

		from("{{batch.movistar.process.folder}}").to("exec:java?args=-jar C:\\tucl\\dev\\batch_mains\\batch-movistar\\target\\BATCH_MOVISTAR.jar").log("Ejecucion del proceso batch movistar .... ");

		// from("{{batch.movistar.in.folder}}").log("Read
		// file").to("{{batch.movistar.process.folder}}").log("Downloaded file
		// ${file:name} complete.");

	}

}

package com.tuc.chile.launcher_batch;

import org.apache.camel.main.Main;
import org.apache.log4j.Logger;

import com.tuc.chile.launcher_batch.route.MovistarInRoute;
import com.tuc.chile.launcher_batch.route.MovistarProcessRoute;

/**
 * Hello world!
 *
 */

public class App
{

	private static Logger logger = org.apache.log4j.Logger.getLogger(App.class);

	public static void main(String[] args)
	{
		logger.info("Starting poc ...");

		Main main = new Main();
		main.addRouteBuilder(new MovistarInRoute());

		main.addRouteBuilder(new MovistarProcessRoute());

		logger.info("Running");
		try
		{
			main.run();
		}
		catch (Exception e)
		{ //
			e.printStackTrace();
		} //
		System.out.println("After execution");

	}
}



